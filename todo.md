# 餐饮选址智能评估系统 TODO

## 核心功能

- [x] 餐厅基本信息表单（类型/客单价/目标客群/规模）
- [x] 选址地点信息录入（地址/面积/租金/上座率/主通道/门头/可达性/周边环境）
- [x] 选址评分系统（客流量/铺位条件/客群匹配度/区域热力/人口/写字楼/人群画像）
- [x] 加权算法配置（快餐模型/正餐聚餐模型）
- [x] 智能匹配算法（综合匹配度百分制）
- [x] 评估结果可视化（雷达图/综合得分/建议等级）
- [x] 评估报告生成（综合得分/雷达图/优劣势/风险/建议）
- [x] 历史评估记录管理（保存/查看/对比）
- [x] PDF报告导出
- [x] 盈亏平衡模拟器（保本营业额/翻台率/风险预警）
- [x] Google Maps集成（选址位置/周边标注/选点获取信息）
- [x] LLM智能分析（专业选址建议报告）
- [x] 重要评估通知功能

## UI/UX

- [x] 戏剧化电影感视觉风格
- [x] 深青色+焦橙色渐变背景
- [x] 粗体白色无衬线字体
- [x] 极简几何装饰元素
- [x] 光影与互补色交织效果

## 页面

- [x] 首页设计
- [x] 控制台Dashboard
- [x] 新建餐厅页面
- [x] 选址评估表单页面
- [x] 评估结果详情页面
- [x] 历史记录列表页面
- [x] 财务计算器页面
- [x] 多选址对比页面

## 数据库

- [x] 餐厅信息表
- [x] 选址评估表
- [x] 评分配置表

## 后端API

- [x] 餐厅信息CRUD
- [x] 选址评估CRUD
- [x] 评分计算API
- [x] 财务测算API
- [x] LLM分析API
- [x] 通知API

## 测试

- [x] 评分算法单元测试
- [x] 财务测算单元测试
- [x] 权重配置测试


## Bug修复

- [ ] 修复用户登录权限问题


## 用户反馈修复 (2026-01-07)

- [x] 地图添加地址搜索输入框，支持输入地址定位
- [x] 周边环境自动调研：选择地点后自动搜索周边写字楼、商场、餐厅等信息
- [x] 翻台率计算修正：满座率从100%改为70%（餐位数×70%=1轮）
- [x] 左侧地址输入框与右侧地图搜索同步，输入地址后地图自动定位

## 用户反馈修复 (2026-01-07 第二批)

- [x] 周边环境数据自动调研：自动填充1km/3km常住人口、停车位数量、年龄层、消费能力等
- [x] 评分维度添加详细的1-10分打分标准说明，让用户知道什么情况打几分

## 用户反馈修复 (2026-01-07 第三批)

- [x] 区域热力值自动评分：根据周边商业配套自动计算热力值，不再手动评分
- [x] 周边餐厅上座率细化：添加是否有同品类餐厅选项
- [x] 周边餐厅上座率细化：显示3家周边餐厅品牌名称（自动获取）
- [x] 周边餐厅上座率细化：上座率改为按周一、周五、周六分别填写

## 用户反馈修复 (2026-01-07 第四批)

- [x] 上座率调研细化：每个品牌（A/B/C）分别记录周一/周五/周六的午市和晚市上座率（共18个数据点）

## Bug修复 (2026-01-07)

- [x] 修复生成报告时数据库插入错误：新的品牌上座率字段已添加到数据库表

## 新功能 (2026-01-07)

- [x] PDF报告导出：在评估结果页面添加导出PDF按钮，生成包含完整评估数据的PDF报告
- [x] 上座率数据验证提示：在表单提交前检查上座率数据是否完整，对未填写的时段给出友好提示
- [x] 上座率数据可视化：在评估结果页面添加品牌上座率对比图表

## 选址模块重构 (2026-01-08)

### 一、数据中心模块
- [x] 热力图图层：客流热力（分时段人流、每周1-7天各时段）
- [x] 热力图图层：房价/租金热力展示区域消费力
- [x] 个性化应用：高亮高档写字楼/办公区/居住区，显示直线距离和周边商场
- [x] POI聚类分析：500米内写字楼数量、商场等级、电影院数量
- [x] 竞对分布：地图标注同品类餐厅（潮汕菜、粤菜、烧腊店等）
- [x] 竞争饱和度指数：自动示警红海区域

### 二、现场勘察模块
- [x] 铺位情况：可视性、通达性、房型缺陷、工程条件缺陷
- [x] 客流量市调：3个品牌（不同客单价）、至少3天、早/中/晚上座率
- [x] 商场品牌业绩参考：3个品牌的最近业绩情况
- [x] 选址评分：手动填写分数，区域热力自动填写

### 三、盈亏平衡点模拟器
- [x] 保留现有功能
- [x] 增加预计营收输入
- [x] 增加预计投资输入
- [x] 自动计算保本点和回本周期

### 四、综合评分
- [x] 整合数据中心、现场勘察、财务指标生成综合选址评分

## Bug修复 (2026-01-08)

- [x] 调整餐厅规模选项：档口型(100平以下)、小型(100-150平)、中型(150-250平)、大型(250平以上)
- [x] 修复创建餐厅时的数据库插入错误（subCategory字段已添加）

- [x] 修复创建餐厅时数据库插入错误（添加subCategory列到数据库表）

## 数据中心优化 (2026-01-08)

- [x] 为热力分析分数添加详细注释说明（客流分数、消费力指数等）
- [x] 接入Google Places API获取真实周边餐厅数据（替代模拟数据）

## Bug修复 (2026-01-08 续)

- [x] 修复现场勘察后提交时的数据库插入错误（已添加缺失字段到数据库）
- [x] 为选址评分添加分数说明（添加tooltip和当前分数说明）

- [x] 修复AI智能分析报错：financialCalculations表已添加缺失字段

- [x] 将竞对分析改为手动输入模式，取消自动获取功能
- [x] 修复PDF导出中文乱码问题（使用Puppeteer生成HTML转PDF）

## Bug修复 (2026-01-08 用户反馈)

- [x] 修复PDF导出报错问题（PDF生成失败）- 已确认功能正常
- [x] 修复财务测算座位数计算方式：一轮=座位数×70%，不能按100%计算

## Bug修复 (2026-01-08 PDF问题)

- [x] 修复PDF导出：改用前端打印预览页面方案（避免服务器端Puppeteer依赖问题）
